!function($){var e=$(".menu-container"),t=e.find(".menu-button"),n=e.find("#site-header-menu"),o=e.find("#site-navigation");t.length&&(t.add(o).attr("aria-expanded","false"),t.on("click",(function(){$(this).add(n).toggleClass("toggled-on"),$(this).add(o).attr("aria-expanded","false"===$(this).add(o).attr("aria-expanded")?"true":"false")}))),$(".menu-item-has-children > a").not(this).each((function(){var e=$(this).text(),t=": submenu",n=": submenu",o=$("<button />",{class:"dropdown-toggle","aria-expanded":!1}).append($("<span />",{class:"screen-readers",text:e+t}));$(this).after(o)})),n.find(".menu-item-has-children").attr("aria-haspopup","true"),n.find(".dropdown-toggle").click((function(e){$(".dropdown-toggle").not(this).each((function(){$(this).removeClass("toggled-on"),$(this).nextAll(".sub-menu").removeClass("toggled-on"),$(this).attr("aria-expanded","false"===$(this).hasClass("toggled-on")?"true":"false")})),e.preventDefault(),$(this).toggleClass("toggled-on"),$(this).nextAll(".sub-menu").toggleClass("toggled-on"),$(this).attr("aria-expanded","false"===$(this).attr("aria-expanded")?"true":"false")})),$(".sub-menu .menu-item-has-children").parent(".sub-menu").addClass("has-sub-menu"),$(".menu-item a, button.dropdown-toggle").on("keydown",(function(e){if(-1!=[37,38,39,40,27].indexOf(e.keyCode))switch(e.keyCode){case 27:$(this).parents("ul").first().prev(".dropdown-toggle.toggled-on").focus(),$(this).parents("ul").first().prev(".dropdown-toggle.toggled-on").click();break;case 37:e.preventDefault(),e.stopPropagation(),$(this).hasClass("dropdown-toggle")?$(this).prev("a").focus():$(this).parent().prev().children("button.dropdown-toggle").length?$(this).parent().prev().children("button.dropdown-toggle").focus():$(this).parent().prev().children("a").focus(),$(this).is("ul ul ul.sub-menu.toggled-on li:first-child a")&&$(this).parents("ul.sub-menu.toggled-on li").children("button.dropdown-toggle").focus();break;case 39:e.preventDefault(),e.stopPropagation(),$(this).next("button.dropdown-toggle").length?$(this).next("button.dropdown-toggle").focus():$(this).parent().next().children("a").focus(),$(this).is("ul.sub-menu .dropdown-toggle.toggled-on")&&$(this).parent().find("ul.sub-menu li:first-child a").focus();break;case 40:e.preventDefault(),e.stopPropagation(),$(this).next().length?$(this).next().find("li:first-child a").first().focus():$(this).parent().next().children("a").focus(),$(this).is("ul.sub-menu a")&&$(this).next("button.dropdown-toggle").length&&$(this).parent().next().children("a").focus(),$(this).is("ul.sub-menu .dropdown-toggle")&&$(this).parent().next().children(".dropdown-toggle").length&&$(this).parent().next().children(".dropdown-toggle").focus();break;case 38:e.preventDefault(),e.stopPropagation(),$(this).parent().prev().length?$(this).parent().prev().children("a").focus():$(this).parents("ul").first().prev(".dropdown-toggle.toggled-on").focus(),$(this).is("ul.sub-menu .dropdown-toggle")&&$(this).parent().prev().children(".dropdown-toggle").length&&$(this).parent().prev().children(".dropdown-toggle").focus();break}}))}(jQuery);