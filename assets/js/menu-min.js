!function(e){var t=e(".menu-container"),n=t.find(".menu-button"),o=t.find("#site-header-menu"),s=t.find("#site-navigation");n.length&&(n.add(s).attr("aria-expanded","false"),n.on("click",(function(){e(this).add(o).toggleClass("toggled-on"),e(this).add(s).attr("aria-expanded","false"===e(this).add(s).attr("aria-expanded")?"true":"false")}))),e(".menu-item-has-children > a").not(this).each((function(){var t=e(this).text(),n=": submenu",o=": submenu",s=e("<button />",{class:"dropdown-toggle","aria-expanded":!1}).append(e("<span />",{class:"screen-readers",text:t+n}));e(this).after(s)})),o.find(".menu-item-has-children").attr("aria-haspopup","true"),o.find(".dropdown-toggle").click((function(t){e(".dropdown-toggle").not(this).each((function(){e(this).removeClass("toggled-on"),e(this).nextAll(".sub-menu").removeClass("toggled-on"),e(this).attr("aria-expanded","false"===e(this).attr("aria-expanded")?"true":"false")})),t.preventDefault(),e(this).toggleClass("toggled-on"),e(this).nextAll(".sub-menu").toggleClass("toggled-on"),e(this).attr("aria-expanded","false"===e(this).attr("aria-expanded")?"true":"false")})),e(".sub-menu .menu-item-has-children").parent(".sub-menu").addClass("has-sub-menu"),e(".menu-item a, button.dropdown-toggle").on("keydown",(function(t){if(-1!=[37,38,39,40,27].indexOf(t.keyCode))switch(t.keyCode){case 27:e(this).parents("ul").first().prev(".dropdown-toggle.toggled-on").focus(),e(this).parents("ul").first().prev(".dropdown-toggle.toggled-on").click();break;case 37:t.preventDefault(),t.stopPropagation(),e(this).hasClass("dropdown-toggle")?e(this).prev("a").focus():e(this).parent().prev().children("button.dropdown-toggle").length?e(this).parent().prev().children("button.dropdown-toggle").focus():e(this).parent().prev().children("a").focus(),e(this).is("ul ul ul.sub-menu.toggled-on li:first-child a")&&e(this).parents("ul.sub-menu.toggled-on li").children("button.dropdown-toggle").focus();break;case 39:t.preventDefault(),t.stopPropagation(),e(this).next("button.dropdown-toggle").length?e(this).next("button.dropdown-toggle").focus():e(this).parent().next().children("a").focus(),e(this).is("ul.sub-menu .dropdown-toggle.toggled-on")&&e(this).parent().find("ul.sub-menu li:first-child a").focus();break;case 40:t.preventDefault(),t.stopPropagation(),e(this).next().length?e(this).next().find("li:first-child a").first().focus():e(this).parent().next().children("a").focus(),e(this).is("ul.sub-menu a")&&e(this).next("button.dropdown-toggle").length&&e(this).parent().next().children("a").focus(),e(this).is("ul.sub-menu .dropdown-toggle")&&e(this).parent().next().children(".dropdown-toggle").length&&e(this).parent().next().children(".dropdown-toggle").focus();break;case 38:t.preventDefault(),t.stopPropagation(),e(this).parent().prev().length?e(this).parent().prev().children("a").focus():e(this).parents("ul").first().prev(".dropdown-toggle.toggled-on").focus(),e(this).is("ul.sub-menu .dropdown-toggle")&&e(this).parent().prev().children(".dropdown-toggle").length&&e(this).parent().prev().children(".dropdown-toggle").focus();break}}))}(jQuery);